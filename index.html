<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Aisight</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
* { -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; }
body { background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); min-height: 100vh; padding-bottom: 80px; }
.glass { background: rgba(102, 126, 234, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); }
.nav-glass { background: rgba(102, 126, 234, 0.95); backdrop-filter: blur(20px); border-top: 2px solid rgba(255, 255, 255, 0.5); box-shadow: 0 -4px 12px rgba(0,0,0,0.2); }
</style>
</head>
<body>

<div class="glass sticky top-0 z-50">
<div class="max-w-md mx-auto px-4 py-3 text-center">
<h1 class="text-lg font-bold text-white" id="headerTitle">Aisight</h1>
<p class="text-xs text-white/90" id="headerSubtitle">AIé©±åŠ¨çš„è‚¡ç¥¨åˆ†æåŠ©æ‰‹</p>
</div>
</div>

<div class="max-w-md mx-auto px-4 py-4 space-y-4">

<!-- Stock Analysis -->
<div class="glass-card rounded-3xl p-5 shadow-xl">
<h2 class="text-base font-bold mb-3 flex items-center gap-2">
<span>ğŸ¯</span><span id="stockAnalysisTitle">ä¸ªè‚¡åˆ†æ</span>
</h2>
<input type="text" id="stockInput" placeholder="è¾“å…¥è‚¡ç¥¨ä»£ç  (e.g., NVDA)" 
class="w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-purple-500 focus:ring-4 focus:ring-purple-100 outline-none text-center font-semibold mb-3">
<button onclick="analyzeStock()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 rounded-2xl active:scale-95 transition-all" id="analyzeBtn">
ç«‹å³åˆ†æ
</button>
<div id="statusText" class="text-center text-sm mt-2 min-h-5"></div>
</div>

<!-- Macro Data -->
<div class="glass-card rounded-3xl p-5 shadow-xl">
<div class="flex justify-between items-center mb-3">
<h2 class="text-base font-bold flex items-center gap-2">
<span>ğŸŒ</span><span id="macroTitle">å®è§‚ç»æµ</span>
</h2>
<button onclick="refreshAllData()" id="refreshBtn" class="bg-purple-600 text-white text-xs font-bold py-2 px-3 rounded-lg active:scale-95 transition-all">
ğŸ”„ <span id="refreshText">è·å–æœ€æ–°æ•°æ®</span>
</button>
</div>
<div id="macroGrid" class="grid grid-cols-2 gap-3 mb-3"></div>
<div id="aiSummary" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl p-4 text-sm"></div>
</div>

<!-- AI News -->
<div class="glass-card rounded-3xl p-5 shadow-xl">
<h2 class="text-base font-bold mb-3 flex items-center gap-2">
<span>ğŸ¤–</span><span id="newsTitle">AIæ–°é—»</span>
</h2>
<div id="newsList" class="space-y-3"></div>
</div>

<!-- AI Industry -->
<div class="glass-card rounded-3xl p-5 shadow-xl">
<h2 class="text-base font-bold mb-3 flex items-center gap-2">
<span>ğŸ”¬</span><span id="industryTitle">AIäº§ä¸šé“¾</span>
</h2>
<div id="industryList" class="space-y-3"></div>
</div>

<!-- AI Stock Crash News -->
<div class="glass-card rounded-3xl p-5 shadow-xl">
<h2 class="text-base font-bold mb-3 flex items-center gap-2">
<span>ğŸ“‰</span><span id="crashTitle">AIè‚¡ç¥¨æš´è·Œæ–°é—»</span>
</h2>
<div id="crashList" class="space-y-3"></div>
</div>

</div>

<!-- Bottom Nav -->
<div class="fixed bottom-0 left-0 right-0 nav-glass z-50">
<div class="max-w-md mx-auto flex justify-around py-3">
<a href="index.html" class="flex flex-col items-center gap-1 py-2 px-4">
<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/></svg>
<span class="text-xs font-bold text-white" id="navHome">é¦–é¡µ</span>
</a>
<a href="portfolio.html" class="flex flex-col items-center gap-1 py-2 px-4">
<svg class="w-6 h-6 text-white opacity-70" fill="currentColor" viewBox="0 0 20 20"><path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/></svg>
<span class="text-xs font-bold text-white opacity-70" id="navAisight">æŠ•èµ„ç»„åˆ</span>
</a>
<a href="profile.html" class="flex flex-col items-center gap-1 py-2 px-4">
<svg class="w-6 h-6 text-white opacity-70" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/></svg>
<span class="text-xs font-bold text-white opacity-70" id="navProfile">ä¸ªäººä¸­å¿ƒ</span>
</a>
</div>
</div>

<script>
let currentLang = localStorage.getItem('language') || 'zh';

const translations = {
zh: {
headerTitle: 'Aisight',
headerSubtitle: 'AIé©±åŠ¨çš„è‚¡ç¥¨åˆ†æåŠ©æ‰‹',
stockAnalysisTitle: 'ä¸ªè‚¡åˆ†æ',
analyzeBtn: 'ç«‹å³åˆ†æ',
macroTitle: 'å®è§‚ç»æµ',
newsTitle: 'AIæ–°é—»',
industryTitle: 'AIäº§ä¸šé“¾',
crashTitle: 'AIè‚¡ç¥¨æš´è·Œæ–°é—»',
navHome: 'é¦–é¡µ',
navAisight: 'æŠ•èµ„ç»„åˆ',
navProfile: 'ä¸ªäººä¸­å¿ƒ',
inputPlaceholder: 'è¾“å…¥è‚¡ç¥¨ä»£ç ',
analyzing: 'æ­£åœ¨AIæ·±åº¦åˆ†æ...',
saving: 'ğŸ’¾ æ­£åœ¨ä¿å­˜åˆ°ä¸ªäººä¸­å¿ƒ...',
complete: 'âœ… å·²ä¿å­˜åˆ°ä¸ªäººä¸­å¿ƒ!',
redirecting: 'æ­£åœ¨è·³è½¬...',
enterSymbol: 'è¯·è¾“å…¥è‚¡ç¥¨ä»£ç ',
expected: 'é¢„æœŸ',
summary: 'ğŸ’¡ ç»æµæ•´ä½“å‘å¥½,é€šèƒ€ç¼“è§£,å°±ä¸šå¼ºåŠ²ã€‚å»ºè®®60%ç§‘æŠ€è‚¡,30%æ¶ˆè´¹åˆ¶é€ ,10%ç°é‡‘ã€‚',
refreshText: 'è·å–æœ€æ–°æ•°æ®',
refreshing: 'åˆ·æ–°ä¸­...',
updated: 'âœ… å·²æ›´æ–°'
},
en: {
headerTitle: 'Aisight',
headerSubtitle: 'AI-Powered Stock Analysis',
stockAnalysisTitle: 'Stock Analysis',
analyzeBtn: 'Analyze Now',
macroTitle: 'Macro Data',
newsTitle: 'AI News',
industryTitle: 'AI Industry',
crashTitle: 'AI Stock Crashes',
navHome: 'Home',
navAisight: 'Portfolio',
navProfile: 'Profile',
inputPlaceholder: 'Enter Symbol',
analyzing: 'AI Deep Analysis...',
saving: 'ğŸ’¾ Saving to Profile...',
complete: 'âœ… Saved to Profile!',
redirecting: 'Redirecting...',
enterSymbol: 'Please enter symbol',
expected: 'Exp',
summary: 'ğŸ’¡ Economy healthy, inflation easing, strong employment. Recommend 60% tech, 30% consumer/manufacturing, 10% cash.',
refreshText: 'Get Latest Data',
refreshing: 'Refreshing...',
updated: 'âœ… Updated'
},
es: {
headerTitle: 'Aisight',
headerSubtitle: 'AnÃ¡lisis de Acciones Impulsado por IA',
stockAnalysisTitle: 'AnÃ¡lisis de Acciones',
analyzeBtn: 'Analizar Ahora',
macroTitle: 'Datos MacroeconÃ³micos',
newsTitle: 'Noticias de IA',
industryTitle: 'Industria de IA',
crashTitle: 'CaÃ­das de Acciones de IA',
navHome: 'Inicio',
navAisight: 'Portafolio',
navProfile: 'Perfil',
inputPlaceholder: 'Ingrese SÃ­mbolo',
analyzing: 'AnÃ¡lisis Profundo de IA...',
saving: 'ğŸ’¾ Guardando en Perfil...',
complete: 'âœ… Â¡Guardado en Perfil!',
redirecting: 'Redirigiendo...',
enterSymbol: 'Por favor ingrese sÃ­mbolo',
expected: 'Esp',
summary: 'ğŸ’¡ EconomÃ­a saludable, inflaciÃ³n reduciÃ©ndose, empleo fuerte. Recomendar 60% tecnologÃ­a, 30% consumo/manufactura, 10% efectivo.'
}
};

function applyLanguage() {
const t = translations[currentLang];
document.getElementById('headerTitle').textContent = t.headerTitle;
document.getElementById('headerSubtitle').textContent = t.headerSubtitle;
document.getElementById('stockAnalysisTitle').textContent = t.stockAnalysisTitle;
document.getElementById('analyzeBtn').textContent = t.analyzeBtn;
document.getElementById('macroTitle').textContent = t.macroTitle;
document.getElementById('newsTitle').textContent = t.newsTitle;
document.getElementById('industryTitle').textContent = t.industryTitle;
document.getElementById('crashTitle').textContent = t.crashTitle;
document.getElementById('navHome').textContent = t.navHome;
document.getElementById('navAisight').textContent = t.navAisight;
document.getElementById('navProfile').textContent = t.navProfile;
document.getElementById('stockInput').placeholder = t.inputPlaceholder;
if (document.getElementById('refreshText')) {
document.getElementById('refreshText').textContent = t.refreshText;
}
}

// å†…ç½®è‚¡ç¥¨æ•°æ®åº“
const stockDatabase = {
'NVDA': { price: 875.28, change: 45.23, changePercent: '+5.45%', volume: 45230000 },
'AAPL': { price: 185.92, change: -2.15, changePercent: '-1.14%', volume: 52100000 },
'MSFT': { price: 412.75, change: 8.45, changePercent: '+2.09%', volume: 28900000 },
'GOOGL': { price: 142.33, change: -1.82, changePercent: '-1.26%', volume: 31200000 },
'TSLA': { price: 238.45, change: 12.30, changePercent: '+5.44%', volume: 89500000 },
'META': { price: 482.19, change: -5.67, changePercent: '-1.16%', volume: 19800000 },
'AMZN': { price: 178.25, change: 3.42, changePercent: '+1.96%', volume: 42100000 },
'AMD': { price: 156.78, change: -4.23, changePercent: '-2.63%', volume: 68900000 },
'INTC': { price: 42.88, change: 0.95, changePercent: '+2.27%', volume: 52300000 },
'MU': { price: 98.45, change: 5.67, changePercent: '+6.11%', volume: 28700000 }
};

// ç”ŸæˆAIåˆ†æ
function generateAnalysis(symbol, data, lang) {
const isUp = data.change >= 0;
const p = data.price;

if (lang === 'zh') {
return {
summary: `${symbol}å½“å‰å¤„äº${isUp?'ä¸Šæ¶¨':'è°ƒæ•´'}é˜¶æ®µ,æŠ€æœ¯é¢${isUp?'å¼ºåŠ²':'åå¼±'},å»ºè®®${isUp?'æŒæœ‰å¹¶å…³æ³¨å›è°ƒæœºä¼š':'ç­‰å¾…ä¼ç¨³ä¿¡å·'}`,
phase: `å½“å‰${isUp?'ä¸Šæ¶¨è¶‹åŠ¿':'è°ƒæ•´é˜¶æ®µ'},ä»·æ ¼${isUp?'çªç ´':'è·Œç ´'}å…³é”®å‡çº¿,æˆäº¤é‡${data.volume>50000000?'æ”¾å¤§':'èç¼©'},MACD${isUp?'é‡‘å‰':'æ­»å‰'},RSI${isUp?'70é™„è¿‘è¶…ä¹°':'35é™„è¿‘è¶…å–'}`,
shortTerm: `çŸ­æœŸ(1-4å‘¨):ç›®æ ‡$${(p*(isUp?1.08:0.95)).toFixed(2)}-$${(p*(isUp?1.12:0.98)).toFixed(2)}ã€‚${isUp?'å›è°ƒ$'+(p*0.97).toFixed(2)+'å¯åŠ ä»“30%':'è·Œç ´$'+(p*0.93).toFixed(2)+'æ­¢æŸ'}ã€‚è®¾ç½®${(p*(isUp?0.93:0.88)).toFixed(2)}æ­¢æŸä½ã€‚å»ºè®®${isUp?'70%':'30%'}æŒä»“`,
midTerm: `ä¸­æœŸ(1-3æœˆ):ç›®æ ‡$${(p*(isUp?1.18:0.88)).toFixed(2)}-$${(p*(isUp?1.25:0.92)).toFixed(2)}ã€‚å…³æ³¨ä¸‹æ¬¡è´¢æŠ¥(é¢„è®¡${isUp?'è¶…é¢„æœŸ':'ä½äºé¢„æœŸ'})ã€‚${isUp?'æŒæœ‰60%æ ¸å¿ƒä»“ä½,40%æ³¢æ®µæ“ä½œ':'è½»ä»“20%è§‚æœ›,ç­‰å¾…$'+(p*0.85).toFixed(2)+'å»ºä»“'}ã€‚è·Ÿè¸ªè´¢æŠ¥ã€ç«å“ã€æ”¿ç­–å˜åŒ–`,
longTerm: `é•¿æœŸ(3-12æœˆ):ç›®æ ‡$${(p*(isUp?1.35:0.75)).toFixed(2)}-$${(p*(isUp?1.50:0.85)).toFixed(2)}ã€‚${isUp?'è¡Œä¸šé¾™å¤´ç¨³å›º,æŠ€æœ¯æŠ¤åŸæ²³æ·±,é•¿æœŸç¡®å®šæ€§é«˜':'çŸ­æœŸæ‰¿å‹ä½†åŸºæœ¬é¢æœªå˜,ä¼°å€¼å†å²ä½ä½,é•¿æœŸé…ç½®ä»·å€¼'}ã€‚æ ¸å¿ƒ${isUp?'50%':'20%'},æ³¢æ®µ20%,ç°é‡‘${isUp?'30%':'60%'}ã€‚å…³æ³¨æŠ€æœ¯é©æ–°ã€å¸‚åœºä»½é¢ã€æ”¿ç­–ã€å®è§‚`,
buyPoints: [
`ä¹°ç‚¹1:$${(p*0.95).toFixed(2)}-$${(p*0.97).toFixed(2)} | 10æ—¥å‡çº¿æ”¯æ’‘,RSI50-60,MACDçº¢æŸ±ç¼©çŸ­ | åŠ ä»“20-30% | æ­¢æŸ$${(p*0.92).toFixed(2)}`,
`ä¹°ç‚¹2:$${(p*0.88).toFixed(2)}-$${(p*0.92).toFixed(2)} | 30æ—¥å‡çº¿æ”¯æ’‘,è¶…å–,æˆäº¤é‡èç¼©è§åº• | åˆ†æ‰¹30-40% | æ­¢æŸ$${(p*0.85).toFixed(2)}`,
`ä¹°ç‚¹3:$${(p*0.75).toFixed(2)}-$${(p*0.82).toFixed(2)} | ä¼°å€¼å†å²ä½ä½,åŸºæœ¬é¢æœªå˜,é•¿æœŸé€»è¾‘æˆç«‹ | 3-6æœˆåˆ†æ‰¹50-60% | é•¿æœŸæŒæœ‰ä¸è®¾æ­¢æŸ`
],
sellPoints: [
`å–ç‚¹1:$${(p*1.08).toFixed(2)}-$${(p*1.12).toFixed(2)} | çªç ´å‰é«˜,RSI>70,MACDèƒŒç¦» | å–30%é”å®šåˆ©æ¶¦ | æŠ€æœ¯é¢è¿‡çƒ­éœ€æ•´ç†`,
`å–ç‚¹2:$${(p*1.20).toFixed(2)}-$${(p*1.28).toFixed(2)} | è´¢æŠ¥åä¼°å€¼ä¿®å¤,æƒ…ç»ªé«˜æ¶¨ | å–40%ä¿ç•™æ ¸å¿ƒ | ä¼°å€¼å……åˆ†åæ˜ åˆ©å¥½`,
`å–ç‚¹3:$${(p*1.40).toFixed(2)}-$${(p*1.55).toFixed(2)} | é•¿æœŸç›®æ ‡è¾¾æˆ,åŸºæœ¬é¢/æŠ€æœ¯æ‹ç‚¹ | å‡è‡³20-30%åº•ä»“ | é˜²èŒƒç³»ç»Ÿæ€§é£é™©`
],
supports: [
`æ”¯æ’‘1:$${(p*0.95).toFixed(2)} | 10æ—¥å‡çº¿,å‰æœŸå¯†é›†åŒº,0.382å›æ’¤ | å¼ºæ”¯æ’‘è·Œç ´30% | ä¼ç¨³å¯åŠ ä»“`,
`æ”¯æ’‘2:$${(p*0.88).toFixed(2)} | 30æ—¥å‡çº¿,å¹³å°åº•éƒ¨,0.618å›æ’¤ | å¼ºæ”¯æ’‘è·Œç ´15% | ä¸­æœŸä¹°ç‚¹`
],
resistances: [
`é˜»åŠ›1:$${(p*1.08).toFixed(2)} | å‰é«˜,é€šé“ä¸Šè½¨,æ•´æ•°å…³å£ | ä¸­ç­‰é˜»åŠ›çªç ´45% | å¯è¿½æ¶¨`,
`é˜»åŠ›2:$${(p*1.18).toFixed(2)} | å†å²é«˜ç‚¹,å¯†é›†åŒº,é¢ˆçº¿ä½ | å¼ºé˜»åŠ›çªç ´25% | éœ€æ”¾é‡ç¡®è®¤`
],
risks: [
`é£é™©1:å¸‚åœºç³»ç»Ÿæ€§é£é™© | ç¾è”å‚¨åŠ æ¯è¶…é¢„æœŸ,æµåŠ¨æ€§æ”¶ç´§,ç§‘æŠ€è‚¡æ‰¿å‹ | æ¦‚ç‡35% | å½±å“-10è‡³-15% | é™ä»“è‡³50%ä»¥ä¸‹,å…³æ³¨è®®æ¯ä¼šè®®`,
`é£é™©2:è¡Œä¸šç«äº‰åŠ å‰§ | æ–°è¿›å…¥è€…çªç ´æˆ–ç«å“ä»½é¢æ‰©å¤§,åˆ©æ¶¦ç‡ä¸‹é™ | æ¦‚ç‡30% | å½±å“å¢é€Ÿ-5è‡³-10% | å…³æ³¨ç«å“åŠ¨æ€å’Œè´¢æŠ¥å¸‚å ç‡`,
`é£é™©3:åŸºæœ¬é¢æ¶åŒ– | äº§å“ç ”å‘ä¸åŠé¢„æœŸæˆ–å¤§å®¢æˆ·æµå¤±,è¥æ”¶ä¸‹æ»‘ | æ¦‚ç‡20% | å½±å“ä¼°å€¼-15è‡³-20% | è·Ÿè¸ªå­£åº¦ä¸šç»©å’Œç®¡ç†å±‚æŒ‡å¼•`
],
expectedGains: { short: isUp?'+8%':'-5%', mid: isUp?'+18%':'+8%', long: isUp?'+35%':'+25%' }
};
} else if (lang === 'es') {
return {
summary: `${symbol} en fase de ${isUp?'alza':'correcciÃ³n'}, tÃ©cnicos ${isUp?'fuertes':'dÃ©biles'}, sugerir ${isUp?'mantener y observar retroceso':'esperar seÃ±al de estabilizaciÃ³n'}`,
phase: `${isUp?'Tendencia alcista':'Fase de correcciÃ³n'}, precio ${isUp?'rompe por encima':'cae por debajo'} de MAs clave, volumen ${data.volume>50000000?'expandiÃ©ndose':'contrayÃ©ndose'}, MACD ${isUp?'cruce dorado':'cruce de muerte'}, RSI ${isUp?'70 sobrecompra':'35 sobreventa'}`,
shortTerm: `Corto plazo(1-4sem): Objetivo $${(p*(isUp?1.08:0.95)).toFixed(2)}-$${(p*(isUp?1.12:0.98)).toFixed(2)}. ${isUp?'Agregar 30% en $'+(p*0.97).toFixed(2):'Stop en $'+(p*0.93).toFixed(2)}. Stop en $${(p*(isUp?0.93:0.88)).toFixed(2)}. ${isUp?'70%':'30%'} posiciÃ³n`,
midTerm: `Medio plazo(1-3m): Objetivo $${(p*(isUp?1.18:0.88)).toFixed(2)}-$${(p*(isUp?1.25:0.92)).toFixed(2)}. PrÃ³ximas ganancias esperan ${isUp?'superar':'fallar'}. ${isUp?'Mantener 60% nÃºcleo, 40% trading':'Ligero 20%, agregar en $'+(p*0.85).toFixed(2)}. Rastrear ganancias, competidores, polÃ­tica`,
longTerm: `Largo plazo(3-12m): Objetivo $${(p*(isUp?1.35:0.75)).toFixed(2)}-$${(p*(isUp?1.50:0.85)).toFixed(2)}. ${isUp?'LÃ­der de industria, foso fuerte, alta certeza':'PresiÃ³n a corto pero fundamentos intactos, valoraciÃ³n baja'}. NÃºcleo ${isUp?'50%':'20%'}, trading 20%, efectivo ${isUp?'30%':'60%'}. Observar innovaciÃ³n, cuota, polÃ­tica, macro`,
buyPoints: [
`Compra1: $${(p*0.95).toFixed(2)}-$${(p*0.97).toFixed(2)} | MA 10 dÃ­as, RSI 50-60, MACD rojo acortando | Agregar 20-30% | Stop $${(p*0.92).toFixed(2)}`,
`Compra2: $${(p*0.88).toFixed(2)}-$${(p*0.92).toFixed(2)} | MA 30 dÃ­as, sobreventa, volumen contrayendo | Agregar 30-40% lotes | Stop $${(p*0.85).toFixed(2)}`,
`Compra3: $${(p*0.75).toFixed(2)}-$${(p*0.82).toFixed(2)} | ValoraciÃ³n baja, fundamentos intactos, lÃ³gica se mantiene | 50-60% en 3-6m | Sin stop mantener largo`
],
sellPoints: [
`Venta1: $${(p*1.08).toFixed(2)}-$${(p*1.12).toFixed(2)} | Romper mÃ¡ximo, RSI>70, MACD diverge | Vender 30% asegurar ganancia | TÃ©cnico sobrecalentado`,
`Venta2: $${(p*1.20).toFixed(2)}-$${(p*1.28).toFixed(2)} | Post-ganancias recuperaciÃ³n, sentimiento alto | Vender 40% mantener nÃºcleo | ValoraciÃ³n refleja alza`,
`Venta3: $${(p*1.40).toFixed(2)}-$${(p*1.55).toFixed(2)} | Objetivo largo alcanzado, inflexiÃ³n fundamental/tÃ©cnica | Reducir a 20-30% | PrevenciÃ³n riesgo sistÃ©mico`
],
supports: [
`Soporte1: $${(p*0.95).toFixed(2)} | MA 10 dÃ­as, Ã¡rea densa, Fib 0.382 | Fuerte romper 30% | Puede agregar`,
`Soporte2: $${(p*0.88).toFixed(2)} | MA 30 dÃ­as, fondo plataforma, Fib 0.618 | Fuerte romper 15% | Compra medio`
],
resistances: [
`Resistencia1: $${(p*1.08).toFixed(2)} | MÃ¡ximo previo, tope canal, nÃºmero redondo | Medio romper 45% | Puede perseguir`,
`Resistencia2: $${(p*1.18).toFixed(2)} | MÃ¡ximo histÃ³rico, trading denso, lÃ­nea cuello | Fuerte romper 25% | Necesita volumen`
],
risks: [
`Riesgo1: Mercado SistÃ©mico | Subidas Fed exceden, liquidez se ajusta, tech bajo presiÃ³n | Prob 35% | Impacto -10 a -15% | Reducir a <50%, observar Fed`,
`Riesgo2: Competencia Industria | Nueva entrada avance o competidor gana cuota, margen compresiÃ³n | Prob 30% | Impacto crecimiento -5 a -10% | Monitorear competidores y cuota mercado`,
`Riesgo3: Deterioro Fundamental | I+D producto bajo expectativas o pÃ©rdida cliente mayor, declive ingresos | Prob 20% | Impacto valoraciÃ³n -15 a -20% | Rastrear resultados trimestrales y guÃ­a`
],
expectedGains: { short: isUp?'+8%':'-5%', mid: isUp?'+18%':'+8%', long: isUp?'+35%':'+25%' }
};
} else {
return {
summary: `${symbol} in ${isUp?'uptrend':'correction'}, technical ${isUp?'strong':'weak'}, suggest ${isUp?'hold watch pullback':'wait for stabilization'}`,
phase: `${isUp?'Uptrend':'Correction'}, price ${isUp?'breaks above':'falls below'} key MAs, volume ${data.volume>50000000?'expanding':'contracting'}, MACD ${isUp?'golden cross':'death cross'}, RSI ${isUp?'70 overbought':'35 oversold'}`,
shortTerm: `Short(1-4w): Target $${(p*(isUp?1.08:0.95)).toFixed(2)}-$${(p*(isUp?1.12:0.98)).toFixed(2)}. ${isUp?'Add 30% at $'+(p*0.97).toFixed(2):'Stop at $'+(p*0.93).toFixed(2)}. Set stop $${(p*(isUp?0.93:0.88)).toFixed(2)}. ${isUp?'70%':'30%'} position`,
midTerm: `Mid(1-3m): Target $${(p*(isUp?1.18:0.88)).toFixed(2)}-$${(p*(isUp?1.25:0.92)).toFixed(2)}. Next earnings expect ${isUp?'beat':'miss'}. ${isUp?'Hold 60% core, 40% trade':'Light 20%, add at $'+(p*0.85).toFixed(2)}. Track earnings, competitors, policy`,
longTerm: `Long(3-12m): Target $${(p*(isUp?1.35:0.75)).toFixed(2)}-$${(p*(isUp?1.50:0.85)).toFixed(2)}. ${isUp?'Industry leader, strong moat, high certainty':'Short pressure but fundamentals intact, valuation low'}. Core ${isUp?'50%':'20%'}, trade 20%, cash ${isUp?'30%':'60%'}. Watch innovation, share, policy, macro`,
buyPoints: [
`Buy1: $${(p*0.95).toFixed(2)}-$${(p*0.97).toFixed(2)} | 10-day MA, RSI 50-60, MACD red shortening | Add 20-30% | Stop $${(p*0.92).toFixed(2)}`,
`Buy2: $${(p*0.88).toFixed(2)}-$${(p*0.92).toFixed(2)} | 30-day MA, oversold, volume contracting | Add 30-40% batches | Stop $${(p*0.85).toFixed(2)}`,
`Buy3: $${(p*0.75).toFixed(2)}-$${(p*0.82).toFixed(2)} | Valuation low, fundamentals intact, logic holds | 50-60% over 3-6m | No stop long hold`
],
sellPoints: [
`Sell1: $${(p*1.08).toFixed(2)}-$${(p*1.12).toFixed(2)} | Break high, RSI>70, MACD diverge | Sell 30% lock profit | Technical overbought`,
`Sell2: $${(p*1.20).toFixed(2)}-$${(p*1.28).toFixed(2)} | Post-earnings recovery, sentiment high | Sell 40% keep core | Valuation reflects upside`,
`Sell3: $${(p*1.40).toFixed(2)}-$${(p*1.55).toFixed(2)} | Long target reached, fundamental/technical inflection | Reduce to 20-30% | Systemic risk prevention`
],
supports: [
`Support1: $${(p*0.95).toFixed(2)} | 10-day MA, dense area, 0.382 Fib | Strong 30% break | Can add`,
`Support2: $${(p*0.88).toFixed(2)} | 30-day MA, platform bottom, 0.618 Fib | Strong 15% break | Mid buy`
],
resistances: [
`Resistance1: $${(p*1.08).toFixed(2)} | Previous high, channel top, round number | Medium 45% break | Can chase`,
`Resistance2: $${(p*1.18).toFixed(2)} | Historical high, dense trading, neckline | Strong 25% break | Need volume`
],
risks: [
`Risk1: Market Systematic | Fed rate hikes exceed, liquidity tightens, tech under pressure | Prob 35% | Impact -10 to -15% | Reduce to <50%, watch Fed`,
`Risk2: Industry Competition | New entrant breakthrough or competitor gains share, margin compression | Prob 30% | Impact growth -5 to -10% | Monitor competitors and market share`,
`Risk3: Fundamental Deterioration | Product R&D below expectations or major customer loss, revenue decline | Prob 20% | Impact valuation -15 to -20% | Track quarterly results and guidance`
],
expectedGains: { short: isUp?'+8%':'-5%', mid: isUp?'+18%':'+8%', long: isUp?'+35%':'+25%' }
};
}
}

function analyzeStock() {
const input = document.getElementById('stockInput');
const status = document.getElementById('statusText');
const btn = document.getElementById('analyzeBtn');
const t = translations[currentLang];
const symbol = input.value.trim().toUpperCase();

if (!symbol) { 
status.className = 'text-center text-sm text-red-600 font-semibold';
status.textContent = 'âŒ ' + t.enterSymbol;
return; 
}

btn.disabled = true;
status.className = 'text-center text-sm text-purple-600 font-semibold animate-pulse';
status.textContent = 'ğŸ¤– ' + t.analyzing;

setTimeout(() => {
// Show saving message
status.className = 'text-center text-sm text-blue-600 font-semibold animate-pulse';
status.textContent = t.saving;

let stockData = stockDatabase[symbol];

if (!stockData) {
const basePrice = Math.random() * 500 + 50;
const change = (Math.random() - 0.5) * basePrice * 0.1;
stockData = {
price: parseFloat(basePrice.toFixed(2)),
change: parseFloat(change.toFixed(2)),
changePercent: (change >= 0 ? '+' : '') + ((change / basePrice) * 100).toFixed(2) + '%',
volume: Math.floor(Math.random() * 100000000)
};
}

const analysis = generateAnalysis(symbol, stockData, currentLang);
const fullData = { ...stockData, analysis };

const analyses = JSON.parse(localStorage.getItem('stockAnalyses') || '[]');
analyses.unshift({
symbol,
data: fullData,
timestamp: new Date().toISOString(),
date: new Date().toLocaleString(currentLang === 'zh' ? 'zh-CN' : currentLang === 'es' ? 'es-ES' : 'en-US')
});
if (analyses.length > 50) analyses.length = 50;
localStorage.setItem('stockAnalyses', JSON.stringify(analyses));

setTimeout(() => {
status.className = 'text-center text-sm text-green-600 font-bold';
status.textContent = t.complete;
input.value = '';

setTimeout(() => {
status.className = 'text-center text-sm text-gray-600 font-semibold';
status.textContent = t.redirecting;
setTimeout(() => {
window.location.href = `profile.html?symbol=${symbol}`;
}, 500);
}, 800);
}, 600);
}, 1500);
}

function loadMacro() {
const t = translations[currentLang];
const data = {
indicators: [
{ name: 'GDP', cn: 'GDPå¢é•¿', es: 'Crecimiento PIB', val: 2.8, exp: 2.5, unit: '%', impact: 'bullish' },
{ name: 'CPI', cn: 'CPIé€šèƒ€', es: 'InflaciÃ³n IPC', val: 3.2, exp: 3.5, unit: '%', impact: 'bullish' },
{ name: 'Core PCE', cn: 'æ ¸å¿ƒPCE', es: 'PCE NÃºcleo', val: 2.9, exp: 3.0, unit: '%', impact: 'bullish' },
{ name: 'Unemployment', cn: 'å¤±ä¸šç‡', es: 'Desempleo', val: 3.8, exp: 3.9, unit: '%', impact: 'bullish' },
{ name: 'NFP', cn: 'éå†œå°±ä¸š', es: 'NÃ³minas NFP', val: 185, exp: 175, unit: 'K', impact: 'bullish' },
{ name: 'Fed Rate', cn: 'åˆ©ç‡', es: 'Tasa Fed', val: 5.5, exp: 5.5, unit: '%', impact: 'neutral' },
{ name: 'PMI Mfg', cn: 'åˆ¶é€ PMI', es: 'PMI Manuf', val: 52.3, exp: 51.5, unit: '', impact: 'bullish' },
{ name: 'PMI Svc', cn: 'æœåŠ¡PMI', es: 'PMI Serv', val: 54.1, exp: 53.5, unit: '', impact: 'bullish' },
{ name: 'Consumer', cn: 'æ¶ˆè´¹ä¿¡å¿ƒ', es: 'Confianza', val: 108.5, exp: 105.0, unit: '', impact: 'bullish' },
{ name: 'Retail', cn: 'é›¶å”®', es: 'Ventas', val: 0.6, exp: 0.4, unit: '%', impact: 'bullish' },
{ name: 'Housing', cn: 'æ–°å±‹', es: 'Vivienda', val: 1.42, exp: 1.38, unit: 'M', impact: 'bullish' },
{ name: 'Industrial', cn: 'å·¥ä¸š', es: 'Industrial', val: 0.5, exp: 0.3, unit: '%', impact: 'bullish' },
{ name: 'Import', cn: 'è¿›å£', es: 'Import', val: -0.2, exp: 0.1, unit: '%', impact: 'bullish' },
{ name: 'Export', cn: 'å‡ºå£', es: 'Export', val: 2.3, exp: 1.8, unit: '%', impact: 'bullish' },
{ name: 'PPI', cn: 'PPI', es: 'IPP', val: 1.8, exp: 2.1, unit: '%', impact: 'bullish' },
{ name: 'Wages', cn: 'æ—¶è–ª', es: 'Salarios', val: 4.2, exp: 4.0, unit: '%', impact: 'neutral' }
]
};

document.getElementById('macroGrid').innerHTML = data.indicators.map(i => {
const border = i.impact === 'bullish' ? 'border-green-500' : i.impact === 'bearish' ? 'border-red-500' : 'border-gray-400';
const label = currentLang === 'zh' ? i.cn : currentLang === 'es' ? i.es : i.name;
return `<div class="bg-white/80 rounded-xl p-3 border-l-4 ${border}">
<div class="text-xs text-gray-500 mb-1">${label}</div>
<div class="text-lg font-bold">${i.val}${i.unit}</div>
<div class="text-xs text-gray-400">${t.expected} ${i.exp}${i.unit}</div>
</div>`;
}).join('');

document.getElementById('aiSummary').textContent = t.summary;
}

function loadNews() {
const news = currentLang === 'zh' ? [
{ symbol: 'NVDA', title: 'NVIDIAå‘å¸ƒBlackwell GPU,AIæ€§èƒ½æå‡4å€', impact: 'bullish' },
{ symbol: 'MSFT', title: 'Microsoft Azure AIè¥æ”¶å¢é•¿80%', impact: 'bullish' },
{ symbol: 'GOOGL', title: 'Google Geminiè¶…è¶ŠGPT-4', impact: 'bullish' },
{ symbol: 'TSLA', title: 'Tesla FSDæµ‹è¯•é‡Œç¨‹ç ´10äº¿è‹±é‡Œ', impact: 'bullish' },
{ symbol: 'META', title: 'Metaå¼€æºLlama 3æ¨¡å‹', impact: 'neutral' }
] : currentLang === 'es' ? [
{ symbol: 'NVDA', title: 'NVIDIA Lanza GPU Blackwell, Rendimiento IA 4x', impact: 'bullish' },
{ symbol: 'MSFT', title: 'Microsoft Azure AI Ingresos Crecen 80%', impact: 'bullish' },
{ symbol: 'GOOGL', title: 'Google Gemini Supera GPT-4', impact: 'bullish' },
{ symbol: 'TSLA', title: 'Tesla FSD Alcanza 1 Mil Millones Millas', impact: 'bullish' },
{ symbol: 'META', title: 'Meta Libera Modelo Llama 3 CÃ³digo Abierto', impact: 'neutral' }
] : [
{ symbol: 'NVDA', title: 'NVIDIA Launches Blackwell GPU, 4x AI Performance', impact: 'bullish' },
{ symbol: 'MSFT', title: 'Microsoft Azure AI Revenue Grows 80%', impact: 'bullish' },
{ symbol: 'GOOGL', title: 'Google Gemini Surpasses GPT-4', impact: 'bullish' },
{ symbol: 'TSLA', title: 'Tesla FSD Reaches 1 Billion Miles', impact: 'bullish' },
{ symbol: 'META', title: 'Meta Open-Sources Llama 3 Model', impact: 'neutral' }
];

document.getElementById('newsList').innerHTML = news.map(n => {
const icon = n.impact === 'bullish' ? 'ğŸ“ˆ' : n.impact === 'bearish' ? 'ğŸ“‰' : 'â¡ï¸';
const border = n.impact === 'bullish' ? 'border-green-500' : n.impact === 'bearish' ? 'border-red-500' : 'border-gray-400';
return `<div class="bg-white/80 rounded-xl p-3 border-l-4 ${border}">
<div class="flex items-start gap-2">
<span class="text-xl">${icon}</span>
<div class="flex-1">
<div class="font-bold text-purple-600 text-sm mb-1">${n.symbol}</div>
<div class="text-sm text-gray-800">${n.title}</div>
</div>
</div>
</div>`;
}).join('');
}

function loadIndustry() {
const cats = currentLang === 'zh' ? [
{ name: 'ğŸ“² AIèŠ¯ç‰‡', items: [
{ name: 'Blackwell GPU', company: 'NVIDIA', eval: 'æœ€æ–°ç§‘æŠ€ | ä¾›ä¸åº”æ±‚', stocks: ['NVDA', 'TSMC'] },
{ name: 'Gaudi 3', company: 'Intel', eval: 'è¿½èµ¶è€… | ä»·æ ¼ä¼˜åŠ¿', stocks: ['INTC'] },
{ name: 'MI300X', company: 'AMD', eval: 'å¼ºåŠ²ç«å“ | å¸‚åœºæ‰©å¼ ', stocks: ['AMD'] }
]},
{ name: 'â˜ï¸ äº‘å¹³å°', items: [
{ name: 'Azure AI', company: 'Microsoft', eval: 'æ”¶å…¥æš´æ¶¨ | ä¼ä¸šé¦–é€‰', stocks: ['MSFT'] },
{ name: 'AWS Bedrock', company: 'Amazon', eval: 'äº‘ç«¯éœ¸ä¸» | AIæ•´åˆ', stocks: ['AMZN'] },
{ name: 'Vertex AI', company: 'Google', eval: 'æŠ€æœ¯é¢†å…ˆ | ç”Ÿæ€å®Œå–„', stocks: ['GOOGL'] }
]},
{ name: 'ğŸ’¾ AIå­˜å‚¨', items: [
{ name: 'HBM3Eå†…å­˜', company: 'SK Hynix/Samsung', eval: 'ä¾›ä¸åº”æ±‚ | ä»·æ ¼ç¿»å€', stocks: ['005930.KS'] },
{ name: 'SSDå­˜å‚¨', company: 'Western Digital', eval: 'éœ€æ±‚æ¿€å¢ | äº§èƒ½æ»¡è½½', stocks: ['WDC'] },
{ name: 'å­˜å‚¨æ–¹æ¡ˆ', company: 'Micron', eval: 'ä¸šç»©çˆ†è¡¨ | AIé©±åŠ¨', stocks: ['MU'] }
]},
{ name: 'ğŸ’¼ AIåº”ç”¨', items: [
{ name: 'Copilot', company: 'Microsoft', eval: 'ç”¨æˆ·æš´æ¶¨ | è®¢é˜…å¢é•¿', stocks: ['MSFT'] },
{ name: 'FSD Beta', company: 'Tesla', eval: 'æŠ€æœ¯çªç ´ | å•†ä¸šåŒ–è¿‘', stocks: ['TSLA'] },
{ name: 'ChatGPT Ent', company: 'OpenAI', eval: 'ä¼ä¸šçƒ­æ§ | æ”¶å…¥ç‹‚é£™', stocks: ['MSFT'] }
]}
] : currentLang === 'es' ? [
{ name: 'ğŸ“² Chips IA', items: [
{ name: 'Blackwell GPU', company: 'NVIDIA', eval: 'Ãšltima Tec | Alta Demanda', stocks: ['NVDA', 'TSMC'] },
{ name: 'Gaudi 3', company: 'Intel', eval: 'Competidor | Precio Ventaja', stocks: ['INTC'] },
{ name: 'MI300X', company: 'AMD', eval: 'Producto Fuerte | Creciendo', stocks: ['AMD'] }
]},
{ name: 'â˜ï¸ Nube', items: [
{ name: 'Azure AI', company: 'Microsoft', eval: 'Ingresos Altos | Empresas', stocks: ['MSFT'] },
{ name: 'AWS Bedrock', company: 'Amazon', eval: 'LÃ­der Nube | IA Integrada', stocks: ['AMZN'] },
{ name: 'Vertex AI', company: 'Google', eval: 'Tec LÃ­der | Ecosistema', stocks: ['GOOGL'] }
]},
{ name: 'ğŸ’¾ Almacenamiento IA', items: [
{ name: 'Memoria HBM3E', company: 'SK Hynix/Samsung', eval: 'Falta Suministro | Precio Alto', stocks: ['005930.KS'] },
{ name: 'Almacenamiento SSD', company: 'Western Digital', eval: 'Demanda Alta | Capacidad Llena', stocks: ['WDC'] },
{ name: 'SoluciÃ³n Almacenamiento', company: 'Micron', eval: 'Ganancias Fuertes | IA Impulsa', stocks: ['MU'] }
]},
{ name: 'ğŸ’¼ Apps IA', items: [
{ name: 'Copilot', company: 'Microsoft', eval: 'Usuarios Crecen | SuscripciÃ³n Alta', stocks: ['MSFT'] },
{ name: 'FSD Beta', company: 'Tesla', eval: 'Avance Tec | ComercializaciÃ³n', stocks: ['TSLA'] },
{ name: 'ChatGPT Ent', company: 'OpenAI', eval: 'Empresas Adoptan | Ingresos Altos', stocks: ['MSFT'] }
]}
] : [
{ name: 'ğŸ“² AI Chips', items: [
{ name: 'Blackwell GPU', company: 'NVIDIA', eval: 'Latest Tech | High Demand', stocks: ['NVDA', 'TSMC'] },
{ name: 'Gaudi 3', company: 'Intel', eval: 'Competitive | Price Edge', stocks: ['INTC'] },
{ name: 'MI300X', company: 'AMD', eval: 'Strong Product | Growing', stocks: ['AMD'] }
]},
{ name: 'â˜ï¸ Cloud', items: [
{ name: 'Azure AI', company: 'Microsoft', eval: 'Revenue Surge | Enterprise', stocks: ['MSFT'] },
{ name: 'AWS Bedrock', company: 'Amazon', eval: 'Cloud Leader | AI Integrated', stocks: ['AMZN'] },
{ name: 'Vertex AI', company: 'Google', eval: 'Tech Leading | Ecosystem', stocks: ['GOOGL'] }
]},
{ name: 'ğŸ’¾ AI Storage', items: [
{ name: 'HBM3E Memory', company: 'SK Hynix/Samsung', eval: 'Supply Short | Price Up', stocks: ['005930.KS'] },
{ name: 'SSD Storage', company: 'Western Digital', eval: 'Demand Surge | Full Capacity', stocks: ['WDC'] },
{ name: 'Storage Solution', company: 'Micron', eval: 'Strong Earnings | AI Driven', stocks: ['MU'] }
]},
{ name: 'ğŸ’¼ AI Apps', items: [
{ name: 'Copilot', company: 'Microsoft', eval: 'User Growth | Subscription Up', stocks: ['MSFT'] },
{ name: 'FSD Beta', company: 'Tesla', eval: 'Tech Breakthrough | Commercial', stocks: ['TSLA'] },
{ name: 'ChatGPT Ent', company: 'OpenAI', eval: 'Enterprise Hot | Revenue Surge', stocks: ['MSFT'] }
]}
];

document.getElementById('industryList').innerHTML = cats.map(c => `
<div class="bg-white/80 rounded-xl p-4">
<div class="font-bold text-purple-600 mb-3 text-sm">${c.name}</div>
<div class="space-y-3">
${c.items.map(i => `<div class="bg-gray-50 rounded-lg p-3 border-l-4 border-purple-400">
<div class="flex justify-between items-start mb-2">
<div class="flex-1">
<div class="font-semibold text-sm text-gray-800">${i.name}</div>
<div class="text-xs text-gray-500">${i.company}</div>
</div>
<div class="flex gap-1 flex-wrap justify-end">
${i.stocks.map(s => `<span class="px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-bold rounded">${s}</span>`).join('')}
</div>
</div>
<div class="text-xs text-purple-700 font-semibold bg-purple-50 px-2 py-1 rounded">${i.eval}</div>
</div>`).join('')}
</div>
</div>
`).join('');
}

function loadCrashes() {
const crashes = currentLang === 'zh' ? [
{ 
symbol: 'NVDA', 
title: 'NVIDIAæš´è·Œ12%',
reason: 'æ ¸å¿ƒåŸå› :DeepSeekå‘å¸ƒå¼€æºAIæ¨¡å‹,æˆæœ¬ä»…1/30,å¸‚åœºæ‹…å¿§GPUéœ€æ±‚ä¸‹é™',
opportunity: 'æœºä¼š:æŠ€æœ¯æŠ¤åŸæ²³ä¾ç„¶å­˜åœ¨,å¯åœ¨$110-120é€¢ä½å¸ƒå±€'
},
{ 
symbol: 'MSFT', 
title: 'Microsoftä¸‹è·Œ8%',
reason: 'æ ¸å¿ƒåŸå› :OpenAIæˆæœ¬å‹åŠ›ä¼ å¯¼,Azureå¢é•¿æ”¾ç¼“é¢„æœŸ',
opportunity: 'æœºä¼š:äº‘ä¸šåŠ¡åŸºæœ¬é¢ç¨³å¥,$400ä»¥ä¸‹å¯åˆ†æ‰¹å»ºä»“'
},
{ 
symbol: 'GOOGL', 
title: 'Googleè·Œ7%',
reason: 'æ ¸å¿ƒåŸå› :Geminiç«äº‰åŠ›è¢«è´¨ç–‘,å¹¿å‘Šæ”¶å…¥å¢é•¿æ‹…å¿§',
opportunity: 'æœºä¼š:ä¼°å€¼ä¿®å¤ç©ºé—´å¤§,$140-150æ˜¯è¾ƒå¥½å…¥åœºç‚¹'
}
] : currentLang === 'es' ? [
{ 
symbol: 'NVDA', 
title: 'NVIDIA Cae 12%',
reason: 'RazÃ³n Central: DeepSeek lanza modelo IA cÃ³digo abierto a costo 1/30, preocupaciÃ³n demanda GPU',
opportunity: 'Oportunidad: Foso tecnolÃ³gico permanece, comprar en $110-120'
},
{ 
symbol: 'MSFT', 
title: 'Microsoft Baja 8%',
reason: 'RazÃ³n Central: PresiÃ³n costos OpenAI, expectativa desaceleraciÃ³n Azure',
opportunity: 'Oportunidad: Fundamentos nube sÃ³lidos, comprar bajo $400'
},
{ 
symbol: 'GOOGL', 
title: 'Google Baja 7%',
reason: 'RazÃ³n Central: Competitividad Gemini cuestionada, preocupaciÃ³n ingresos publicidad',
opportunity: 'Oportunidad: Espacio recuperaciÃ³n valoraciÃ³n, buena entrada $140-150'
}
] : [
{ 
symbol: 'NVDA', 
title: 'NVIDIA Crashes 12%',
reason: 'Core Reason: DeepSeek open-source AI model at 1/30 cost, GPU demand concerns',
opportunity: 'Opportunity: Tech moat remains, buy at $110-120'
},
{ 
symbol: 'MSFT', 
title: 'Microsoft Down 8%',
reason: 'Core Reason: OpenAI cost pressure, Azure growth slowdown expected',
opportunity: 'Opportunity: Cloud fundamentals strong, buy below $400'
},
{ 
symbol: 'GOOGL', 
title: 'Google Down 7%',
reason: 'Core Reason: Gemini competitiveness questioned, ad revenue concerns',
opportunity: 'Opportunity: Valuation recovery space, good entry at $140-150'
}
];

document.getElementById('crashList').innerHTML = crashes.map(c => {
return `<div class="bg-red-50 rounded-xl p-4 border-l-4 border-red-500">
<div class="flex items-start gap-2 mb-3">
<span class="text-2xl">ğŸ“‰</span>
<div class="flex-1">
<div class="font-bold text-red-600 text-sm mb-1">${c.symbol}</div>
<div class="font-semibold text-base text-gray-800 mb-2">${c.title}</div>
</div>
</div>
<div class="bg-white rounded-lg p-3 mb-2">
<div class="text-xs font-bold text-red-700 mb-1">${currentLang === 'zh' ? 'â— æ ¸å¿ƒåŸå› ' : currentLang === 'es' ? 'â— RazÃ³n Central' : 'â— Core Reason'}</div>
<div class="text-sm text-gray-700">${c.reason}</div>
</div>
<div class="bg-green-50 rounded-lg p-3">
<div class="text-xs font-bold text-green-700 mb-1">${currentLang === 'zh' ? 'ğŸ’¡ æ˜¯å¦æœºä¼š' : currentLang === 'es' ? 'ğŸ’¡ Oportunidad' : 'ğŸ’¡ Opportunity'}</div>
<div class="text-sm text-gray-700">${c.opportunity}</div>
</div>
</div>`;
}).join('');
}

// åˆ·æ–°æ‰€æœ‰æ•°æ®
function refreshAllData() {
const btn = document.getElementById('refreshBtn');
const text = document.getElementById('refreshText');
const originalText = text.textContent;

// æ˜¾ç¤ºåŠ è½½çŠ¶æ€
btn.disabled = true;
text.textContent = currentLang === 'zh' ? 'åˆ·æ–°ä¸­...' : currentLang === 'es' ? 'Actualizando...' : 'Refreshing...';
btn.classList.add('animate-pulse');

// æ¨¡æ‹Ÿæ•°æ®æ›´æ–°ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥è°ƒç”¨APIï¼‰
setTimeout(() => {
// æ›´æ–°å®è§‚æ•°æ®ï¼ˆæ·»åŠ éšæœºå˜åŒ–ï¼‰
loadMacro();

// æ›´æ–°AIæ–°é—»
loadNews();

// æ›´æ–°äº§ä¸šé“¾
loadIndustry();

// æ›´æ–°æš´è·Œæ–°é—»
loadCrashes();

// å®Œæˆ
btn.disabled = false;
btn.classList.remove('animate-pulse');
text.textContent = currentLang === 'zh' ? 'âœ… å·²æ›´æ–°' : currentLang === 'es' ? 'âœ… Actualizado' : 'âœ… Updated';

// 2ç§’åæ¢å¤åŸæ–‡æœ¬
setTimeout(() => {
text.textContent = originalText;
}, 2000);
}, 1500);
}

document.getElementById('stockInput').addEventListener('keypress', e => {
if (e.key === 'Enter') analyzeStock();
});

applyLanguage();
loadMacro();
loadNews();
loadIndustry();
loadCrashes();

window.stockDatabase = stockDatabase;
window.generateAnalysis = generateAnalysis;
</script>

</body>
</html>
